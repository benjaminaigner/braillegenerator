<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">

    <title>Braille Generator</title>
</head>
<body>

<div id="braillegenerator">
    <script>
        var brailleGenerator = {};
        brailleGenerator.BASE_PATH_PREFIX = '';
        //brailleGenerator.BASE_PATH_PREFIX = 'fileadmin/wbt-template/braillegenerator/';
    </script>

    <h1><span lang="fr">Braille</span> f&uuml;r Schilder & Labels generieren</h1>
    <p>
        Mit diesem <span lang="fr">Braille</span> Generator k&ouml;nnen beliebige Texte in <span lang="fr">Braille</span> Zeichen
        umgewandelt werden.<br>
        Diese <span lang="fr">Braille</span>zeichen k&ouml;nnen als STL Datei f&uuml;r den 3D Drucker exportiert werden.
    </p>

    <p>
        Man kann die Zeichen einerseits mit einer R&uuml;ckplatte drucken, so kann
        man ein <span lang="fr">Braille</span>label erzeugen, welches stehend gedruckt werden sollte.
        Um den Druck zu erleichten kann eine St&uuml;tzplatte aktiviert werden.
        Andererseits k&ouml;nnen nur die <span lang="fr">Braille</span> Punkte selbst erzeugt werden.
        Diese kann man mit speziellen Einstellungen auf ein Tr&auml;germaterial drucken,
        wie zum Beispiel auf eine Acryl oder Hartschaumplatte.
    </p>

    <h1><span lang="fr">Braille</span> Generator Applikation</h1>
    <div id="viewer"></div>


    <h2>Navigation</h2>
    <p>
        Links-Klick+Ziehen der Maus rotiert das Modell um den Ursprungspunkt.
        Durch dr&uuml;cken der Alt Taste wird die Rotationsachse gewechselt.
        Mit der Hochstelltaste (Shift) kann das Modell verschoben werden.
        Die rechte Maustaste oder das Mausrad &auml;ndern die Gr&ouml;sse.
    </p>

    <h2>Lizenz</h2>

    <p>
        Diese Seite wurde basierend auf dem Projekt OpenJsCAD von Joost Nieuwenhuijse entwickelt.
        Mit Ausnahme der braille.jscad Datei, welche der GPL Lizenz unterliegt, ist diese Projekt MIT lizensiert.
        Der <a href="https://github.com/benjaminaigner/braillegenerator">Quellcode dieses Projektes</a> ist auf Github zu finden.
    </p>

    <p>
        Urheber der Quelldateien f&uuml;r dieses Projekt: <br/>
    </p>
    <span lang="en">
        <p>OpenJsCad is developed by <a href="https://github.com/joostn">Joost Nieuwenhuijse</a>.
            Based on <a href="https://github.com/evanw/csg.js">initial CSG.js</a> copyright (c) 2011 <a
                    href="https://github.com/evanw">Evan Wallace</a>.
            Uses <a href="https://github.com/evanw/lightgl.js">lightgl.js</a> by <a href="https://github.com/evanw">Evan
                Wallace</a>
            and <a href="https://github.com/toaarnio">Tomi Aarnio</a> for WebGL rendering.
            Contributions by <a href="https://github.com/alx">Alexandre Girard</a>,
            <a href="https://github.com/tlrobinson">Tom Robinson</a>,
            <a href="https://github.com/jboecker">jboecker</a>,
            <a href="https://github.com/risacher">risacher</a>,
            <a href="https://github.com/tedbeer">tedbeer</a>,
            <a href="https://github.com/bebbi">bebbi</a>,
            <a href="https://github.com/sahilshekhawat">Sahil Shekhawat</a>.
            All code released under MIT license.
        </p>
        <p>Contributions are welcome! It's all written in Javascript, so if you know how to use it you
            know how to modify it as well.
            To contribute go to <a href="https://github.com/joostn/OpenJsCad/tree/gh-pages">OpenJsCad at GitHub (gh-pages
                tree)</a>,
            <a href="http://help.github.com/fork-a-repo/">create your own fork</a> and
            <a href="http://help.github.com/send-pull-requests/">send me a pull request</a>. Note that the code is
            maintained
            in the gh-pages branch, not the master branch. This is so that it can be accessed directly via Github pages.
        </p>
    </span>

    <textarea id="code" style="display: none"></textarea>

    <script>
        brailleGenerator.gProcessor = null;

        brailleGenerator.loadScripts = function () {
            document.getElementById("braillegenerator").insertAdjacentHTML("beforeend", '<link rel="stylesheet" href="' + brailleGenerator.BASE_PATH_PREFIX + 'openjscad.css" type="text/css">');
            return brailleGenerator.importExternalScript(brailleGenerator.BASE_PATH_PREFIX + 'lib/three.min.js').then(function () {
                return brailleGenerator.importExternalScript(brailleGenerator.BASE_PATH_PREFIX + 'lib/orbitcontrols.js');
            }).then(function () {
                return brailleGenerator.importExternalScript(brailleGenerator.BASE_PATH_PREFIX + 'lib/projector.js');
            }).then(function () {
                return brailleGenerator.importExternalScript(brailleGenerator.BASE_PATH_PREFIX + 'lib/canvasrenderer.js');
            }).then(function () {
                return brailleGenerator.importExternalScript(brailleGenerator.BASE_PATH_PREFIX + 'lib/jquery-2.1.3.min.js');
            }).then(function () {
                return brailleGenerator.importExternalScript(brailleGenerator.BASE_PATH_PREFIX + 'src/csg.js');
            }).then(function () {
                return brailleGenerator.importExternalScript(brailleGenerator.BASE_PATH_PREFIX + 'src/threecsg.js');
            }).then(function () {
                return brailleGenerator.importExternalScript(brailleGenerator.BASE_PATH_PREFIX + 'src/openjscad.js');
            }).then(function () {
                return brailleGenerator.importExternalScript(brailleGenerator.BASE_PATH_PREFIX + 'src/formats.js');
            });
        }

        brailleGenerator.start = function () {
            brailleGenerator.loadScripts().then(function () {
                // Show all exceptions to the user:
                OpenJsCad.AlertUserOfUncaughtExceptions();
                brailleGenerator.gProcessor = new OpenJsCad.Processor(document.getElementById("viewer"));
                brailleGenerator.getBraille('braille.jscad');
                brailleGenerator.updateSolid();
            });
        }

        brailleGenerator.updateSolid = function () {
            brailleGenerator.gProcessor.setJsCad(document.getElementById('code').value);
        }


        brailleGenerator.getExample = function (name) {
            var el = document.getElementById('code');
            $.get(brailleGenerator.BASE_PATH_PREFIX + 'examples/' + name, function (data) {
                el.value = data;
                brailleGenerator.updateSolid();
            });
        }

        brailleGenerator.getBraille = function (name) {
            var el = document.getElementById('code');
            $.get(brailleGenerator.BASE_PATH_PREFIX + name, function (data) {
                el.value = data;
                brailleGenerator.updateSolid();
            });
        }

        // see https://stackoverflow.com/questions/54781242/using-dynamic-import-to-fetch-script-from-another-host
        brailleGenerator.importExternalScript = function (url) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = url;
                script.async = true;
                script.onload = () => resolve(window['external_global_component']);
                script.onerror = reject;

                document.body.appendChild(script);
            });
        }

        brailleGenerator.start();
    </script>
</div>


</body>
</html>
